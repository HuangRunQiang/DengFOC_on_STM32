/*
 * current_sense.h
 *
 *  Created on: Dec 24, 2023
 *      Author: haotian
 */

#ifndef INC_CURRENT_SENSE_H_
#define INC_CURRENT_SENSE_H_

#include "stm32f1xx_hal.h"
#include <math.h>



float offset[3];
const int adc_range=4095;
const double Vref=3.3;    // Voltage
const double Rsense=0.33; // Ohm
const double KV= 2375.0/12.0; //KV number (RPM is 2149 - 2375, when operating voltage is 12V)
double current_phase[3];

void ADC_Select_CH0(ADC_HandleTypeDef);
void ADC_Select_CH1(ADC_HandleTypeDef);
void ADC_Select_CH2(ADC_HandleTypeDef);
void read_ADC_voltage(ADC_HandleTypeDef ,uint16_t *);
void calibrateOffsets(ADC_HandleTypeDef,uint16_t *);

#endif /* INC_CURRENT_SENSE_H_ */
